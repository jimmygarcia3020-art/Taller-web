<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ingresos - Sistema Contable</title>
  <!-- Estilo general de la barra lateral -->
  <link rel="stylesheet" href="../../style_contador_slidebar.css" />

  <!-- Estilo propio de la p√°gina de ingresos -->
  <link rel="stylesheet" href="style_ingresos_contador.css" />
</head>
<body>
  <!-- SIDEBAR -->
    <nav class="sidebar" id="sidebar">
        <button class="toggle-btn" id="toggle-btn">‚ò∞</button>
        <ul>
            <li><a href="../../index_contador.html"><span class="emoji">üè†</span><span class="text">Inicio</span></a></li>
            <li><a href="../ingresos_contador/ingresos_contador.html"><span class="emoji">üí∞</span><span class="text">Ingresos</span></a></li>
            <li><a href="../egresos_contador/egresos_contador.html"><span class="emoji">üí∏</span><span class="text">Egresos</span></a></li>
            <li><a href="../impuestos_contador/impuestos_contador.html"><span class="emoji">üßÆ</span><span class="text">Impuestos</span></a></li>
            
            <li><a href="../reportes_contador/reportes_contador.html"><span class="emoji">üìà</span><span class="text">Reportes</span></a></li>

            <li><a href="../../cerrar_sesion.php"><span class="emoji">üö™</span><span class="text">Cerrar sesi√≥n</span></a></li>
        </ul>
    </nav>
  <script>
          // === FUNCIONES ESENCIALES PARA EL TOGGLE Y DROPDOWN ===

          // 1. Alternar la barra lateral (colapsar/expandir)
          document.getElementById("toggle-btn").addEventListener("click", function() {
              document.getElementById("sidebar").classList.toggle("collapsed");
          });

          // 2. Alternar el Dropdown (Contabilidad/Reportes)
          function toggleDropdown(dropdownId) {
              var dropdown = document.getElementById(dropdownId);
              if (dropdown) {
                  // Cierra todos los dem√°s dropdowns abiertos
                  document.querySelectorAll(".dropdown.open").forEach(openDropdown => {
                      if (openDropdown.id !== dropdownId) {
                          openDropdown.classList.remove("open");
                      }
                  });

                  // Abre o cierra el dropdown actual
                  dropdown.classList.toggle("open");
              }
          }
      </script>

  <!-- CONTENIDO PRINCIPAL -->
  <main class="main-content">
    <h1>Registro de Ingresos</h1>
    <p>Registra los comprobantes de venta emitidos (facturas, boletas, notas de cr√©dito o d√©bito) seg√∫n los lineamientos de SUNAT.</p>

<!-- BOT√ìN DE SELECCI√ìN DE CLIENTE EN EL HEADER -->
<div class="header-cliente" style="display: flex; align-items: center; gap: 15px;">

    <button type="button" id="btn-header-seleccionar-cliente">
        Seleccionar Cliente
    </button>

    <!-- CLIENTE SELECCIONADO -->
    <div id="cliente-seleccionado" style="font-weight: 600;">
        Ning√∫n cliente seleccionado
    </div>

</div>


<!-- VENTANA FLOTANTE PARA SELECCIONAR CLIENTE -->
<div id="modal-clientes" class="modal-clientes" style="
    display:none;
    position: fixed;
    z-index: 2000;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.45);
    padding: 20px;
">
    <div class="modal-clientes-content" style="
        background: #fff;
        width: 90%;
        max-width: 700px;
        margin: 60px auto;
        padding: 20px;
        border-radius: 10px;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 8px 20px rgba(0,0,0,0.25);
    ">
        <span class="cerrar-modal-clientes" id="cerrar-modal-clientes" style="
            float: right;
            cursor: pointer;
            font-size: 22px;
        ">‚úñ</span>

        <h2 style="margin-top: 0;">Seleccionar Cliente</h2>

        <table class="tabla-clientes" style="width:100%; border-collapse: collapse; margin-top:15px;">
            <thead>
                <tr>
                    <th style="border:1px solid #ccc; padding:8px;">Nombre / Raz√≥n Social</th>
                    <th style="border:1px solid #ccc; padding:8px;">RUC / DNI</th>
                    <th style="border:1px solid #ccc; padding:8px;">Acci√≥n</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="border:1px solid #ccc; padding:8px;">Empresa ABC SAC</td>
                    <td style="border:1px solid #ccc; padding:8px;">20123456789</td>
                    <td style="border:1px solid #ccc; padding:8px;">
                        <button class="seleccionar-cliente"
                            data-nombre="Empresa ABC SAC"
                            data-ruc="20123456789">
                            Elegir
                        </button>
                    </td>
                </tr>

                <tr>
                    <td style="border:1px solid #ccc; padding:8px;">Juan P√©rez</td>
                    <td style="border:1px solid #ccc; padding:8px;">12345678</td>
                    <td style="border:1px solid #ccc; padding:8px;">
                        <button class="seleccionar-cliente"
                            data-nombre="Juan P√©rez"
                            data-ruc="12345678">
                            Elegir
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>

    </div>
</div>

<script>
    const btnSeleccionar = document.getElementById("btn-header-seleccionar-cliente");
    const modal = document.getElementById("modal-clientes");
    const cerrarModal = document.getElementById("cerrar-modal-clientes");
    const clienteSeleccionado = document.getElementById("cliente-seleccionado");

    btnSeleccionar.onclick = () => modal.style.display = "block";
    cerrarModal.onclick = () => modal.style.display = "none";

    document.querySelectorAll(".seleccionar-cliente").forEach(btn => {
        btn.addEventListener("click", () => {

            // Mostrar el nombre del cliente en el header
            clienteSeleccionado.textContent =
                btn.dataset.nombre + " (" + btn.dataset.ruc + ")";

            modal.style.display = "none";
        });
    });

    window.onclick = (e) => {
        if (e.target === modal) modal.style.display = "none";
    };
</script>




    <!-- FORMULARIO DE REGISTRO -->
    <section class="form-section">
      <h2>Agregar Comprobante</h2>
      <form id="form-ingreso">
        <div class="form-group">
          <label for="tipo">Tipo de Comprobante:</label>
          <select id="tipo" required>
            <option value="">Seleccione...</option>
            <option value="factura">Factura</option>
            <option value="boleta">Boleta</option>
            <option value="nota_credito">Nota de cr√©dito</option>
            <option value="nota_debito">Nota de d√©bito</option>
          </select>
        </div>

        <div class="form-group">
          <label for="serie">Serie:</label>
          <input type="text" id="serie" placeholder="F001" required />
        </div>

        <div class="form-group">
          <label for="numero">N√∫mero:</label>
          <input type="number" id="numero" placeholder="00012345" required />
        </div>

        <div class="form-group">
          <label for="fecha">Fecha de Emisi√≥n:</label>
          <input type="date" id="fecha" required />
        </div>

        <div class="form-group">
          <label for="cliente">Cliente:</label>
          <input type="text" id="cliente" placeholder="Nombre o raz√≥n social" required />
        </div>

        <div class="form-group">
          <label for="ruc">RUC / DNI:</label>
          <input type="text" id="ruc" placeholder="20123456789" required />
        </div>

        <div class="form-group">
          <label for="monto">Monto Total (S/):</label>
          <input type="number" id="monto" step="0.01" placeholder="0.00" required />
        </div>

        <div class="form-group">
          <label for="igv">IGV (18%):</label>
          <input type="number" id="igv" step="0.01" placeholder="0.00" readonly />
        </div>

        <button type="submit">Registrar</button>
      </form>
    </section>

    <!-- TABLA DE REGISTROS -->
    <section class="tabla-section">
      <h2>Comprobantes Registrados</h2>
      <table id="tabla-ingresos">
        <thead>
          <tr>
            <th>Tipo</th>
            <th>Serie</th>
            <th>N√∫mero</th>
            <th>Fecha</th>
            <th>Cliente</th>
            <th>RUC/DNI</th>
            <th>Monto Total</th>
            <th>IGV</th>
          </tr>
        </thead>
        <tbody>
          <!-- Los registros se insertan aqu√≠ din√°micamente -->
        </tbody>
      </table>
    </section>
  </main>

  <script src="/script.js"></script>
  <script src="script_contador_ingresos.js"></script>
</body>
</html>
